<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Progress - One More Route</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-top">
                <h1>One More Route</h1>
                <div class="header-intro">
                    <p class="intro-text">Hey there! I decided to ride every route on Zwift in 2026, and created this thingy to help me keep track of the progress.</p>
                    <div class="header-badges">
                        <a href="https://www.strava.com/athletes/vitords" target="_blank" rel="noopener noreferrer" class="strava-profile-badge">
                            <img src="https://d3nn82uaxijpm6.cloudfront.net/assets/website_v2/svgs/strava-orange-b3599d0edada6b7203f021e9c1e34a63.svg" alt="Strava" class="strava-logo-badge">
                            <span>Find me on Strava</span>
                        </a>
                        <a href="https://github.com/vitords/one-more-route" target="_blank" rel="noopener noreferrer" class="strava-profile-badge">
                            <svg class="strava-logo-badge" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                                <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
                            </svg>
                            <span>View on GitHub</span>
                        </a>
                    </div>
                </div>
            </div>
            <div class="header-bottom">
                <div class="navigation-links">
                    <!-- Navigation links will be injected here by app.js -->
                </div>
                <div class="auth-section">
                    <button id="auth-btn" class="btn btn-primary">Login to Edit</button>
                    <span id="auth-status" class="auth-status"></span>
                    <button id="strava-connect-btn" class="btn btn-primary">Connect Strava</button>
                    <span id="strava-status" class="auth-status"></span>
                </div>
            </div>
        </header>

        <div class="stats-dashboard">
            <div class="stats-section">
                <h3 class="stats-section-title">Overview</h3>
                <div class="stats-grid">
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Total:</span>
                        <span class="stat-value-inline" id="total-routes">0</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Completed:</span>
                        <span class="stat-value-inline" id="completed-routes">0</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Remaining:</span>
                        <span class="stat-value-inline" id="remaining-routes">0</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Progress:</span>
                        <span class="stat-value-inline" id="percentage-complete">0%</span>
                    </div>
                </div>
            </div>
            
            <div class="stats-section">
                <h3 class="stats-section-title">Distance</h3>
                <h4 class="stats-section-subtitle">Routes Only</h4>
                <div class="stats-grid">
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Total:</span>
                        <span class="stat-value-inline" id="total-distance">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Completed:</span>
                        <span class="stat-value-inline" id="completed-distance">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Remaining:</span>
                        <span class="stat-value-inline" id="remaining-distance">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (All):</span>
                        <span class="stat-value-inline" id="avg-distance-all">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (Done):</span>
                        <span class="stat-value-inline" id="avg-distance-completed">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (Remaining):</span>
                        <span class="stat-value-inline" id="avg-distance-remaining">0.0 km</span>
                    </div>
                </div>
                <h4 class="stats-section-subtitle" data-tooltip="Lead-in values are approximate. Lead-in is the distance/elevation that needs to be ridden before reaching the official start of the route.">With Lead-In</h4>
                <div class="stats-grid">
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Total:</span>
                        <span class="stat-value-inline" id="total-distance-leadin">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Completed:</span>
                        <span class="stat-value-inline" id="completed-distance-leadin">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Remaining:</span>
                        <span class="stat-value-inline" id="remaining-distance-leadin">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (All):</span>
                        <span class="stat-value-inline" id="avg-distance-all-leadin">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (Done):</span>
                        <span class="stat-value-inline" id="avg-distance-completed-leadin">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (Remaining):</span>
                        <span class="stat-value-inline" id="avg-distance-remaining-leadin">0.0 km</span>
                    </div>
                </div>
            </div>
            
            <div class="stats-section">
                <h3 class="stats-section-title">Elevation</h3>
                <h4 class="stats-section-subtitle">Routes Only</h4>
                <div class="stats-grid">
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Total:</span>
                        <span class="stat-value-inline" id="total-elevation">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Completed:</span>
                        <span class="stat-value-inline" id="completed-elevation">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Remaining:</span>
                        <span class="stat-value-inline" id="remaining-elevation">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (All):</span>
                        <span class="stat-value-inline" id="avg-elevation-all">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (Done):</span>
                        <span class="stat-value-inline" id="avg-elevation-completed">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (Remaining):</span>
                        <span class="stat-value-inline" id="avg-elevation-remaining">0 m</span>
                    </div>
                </div>
                <h4 class="stats-section-subtitle" data-tooltip="Lead-in values are approximate. Lead-in is the distance/elevation that needs to be ridden before reaching the official start of the route.">With Lead-In</h4>
                <div class="stats-grid">
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Total:</span>
                        <span class="stat-value-inline" id="total-elevation-leadin">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Completed:</span>
                        <span class="stat-value-inline" id="completed-elevation-leadin">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Remaining:</span>
                        <span class="stat-value-inline" id="remaining-elevation-leadin">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (All):</span>
                        <span class="stat-value-inline" id="avg-elevation-all-leadin">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (Done):</span>
                        <span class="stat-value-inline" id="avg-elevation-completed-leadin">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (Remaining):</span>
                        <span class="stat-value-inline" id="avg-elevation-remaining-leadin">0 m</span>
                    </div>
                </div>
            </div>
            
            <div class="stats-section">
                <h3 class="stats-section-title">Strava Activities</h3>
                <div class="stats-grid">
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Distance:</span>
                        <span class="stat-value-inline" id="strava-total-distance">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Elevation:</span>
                        <span class="stat-value-inline" id="strava-total-elevation">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Moving Time:</span>
                        <span class="stat-value-inline" id="strava-total-moving-time">0:00</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Elapsed Time:</span>
                        <span class="stat-value-inline" id="strava-total-elapsed-time">0:00</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Calories:</span>
                        <span class="stat-value-inline" id="strava-total-calories">0</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="controls">
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="completed">Completed</button>
                <button class="filter-btn" data-filter="remaining">Remaining</button>
            </div>
            <div class="sort-box">
                <label for="sort-select" class="sort-label">Sort:</label>
                <div class="sort-controls">
                    <select id="sort-select" class="sort-select">
                        <option value="routeDistance">Route distance</option>
                        <option value="totalDistance">Total distance</option>
                        <option value="routeElevation">Route elevation</option>
                        <option value="totalElevation">Total elevation</option>
                        <option value="completionOrder">Completion order</option>
                    </select>
                    <button type="button" id="sort-direction-btn" class="sort-direction-btn" aria-label="Toggle sort direction" title="Toggle sort direction">
                        <svg class="sort-direction-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M7 15l5 5 5-5M7 9l5-5 5 5"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="search-box">
                <input type="text" id="search-input" placeholder="Search routes...">
            </div>
        </div>

        <div id="routes-container" class="routes-container">
            <div class="loading">Loading routes...</div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="auth-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>GitHub Authentication</h2>
            <p>To edit routes, you need to authenticate with GitHub.</p>
            <div class="auth-options">
                <div class="auth-option">
                    <h3>Option 1: Personal Access Token</h3>
                    <p>Create a token with <code>gist</code> scope at:</p>
                    <a href="https://github.com/settings/tokens" target="_blank">github.com/settings/tokens</a>
                    <input type="password" id="token-input" placeholder="Enter your GitHub token">
                    <button id="token-submit" class="btn btn-primary">Use Token</button>
                </div>
                <div class="auth-option">
                    <h3>Option 2: OAuth (Coming Soon)</h3>
                    <p>OAuth flow will be available in a future update.</p>
                </div>
            </div>
            <div id="gist-setup" class="gist-setup" style="display: none;">
                <h3>Gist Setup (Optional)</h3>
                <p><strong>A new Gist will be automatically created when you mark your first route as completed.</strong> You can close this modal and start tracking routes right away!</p>
                <p>If you already have a Gist with your progress, enter its ID below:</p>
                <input type="text" id="gist-id-input" placeholder="Gist ID (optional)">
                <button id="gist-submit" class="btn btn-primary">Save Gist ID</button>
            </div>
        </div>
    </div>

    <!-- Activity Linking Modal -->
    <div id="activity-modal" class="modal">
        <div class="modal-content">
            <span class="close-activity">&times;</span>
            <h2>Link Strava Activity</h2>
            <div id="activity-modal-content">
                <div class="activity-link-option">
                    <h3>Option 1: Enter Activity URL or ID</h3>
                    <input type="text" id="activity-input" placeholder="https://www.strava.com/activities/123456789 or 123456789">
                    <button id="activity-link-btn" class="btn btn-primary">Link Activity</button>
                </div>
                <div class="activity-link-option" id="recent-activities-option" style="display: none;">
                    <h3>Option 2: Select from Recent Activities</h3>
                    <div id="recent-activities-list" class="recent-activities-list"></div>
                    <button id="load-activities-btn" class="btn btn-secondary">Load Recent Activities</button>
                </div>
            </div>
            <div id="activity-linking-status" class="activity-status"></div>
        </div>
    </div>

    <!-- Activity Details Modal -->
    <div id="activity-details-modal" class="modal">
        <div class="modal-content modal-large">
            <span class="close-activity-details">&times;</span>
            <h2 id="activity-details-title">Strava Activity</h2>
            <div id="activity-details-content"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

