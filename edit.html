<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Progress - Zwift Route Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Zwift Route Tracker - Edit Mode</h1>
            <div class="auth-section">
                <button id="auth-btn" class="btn btn-primary">Login to Edit</button>
                <span id="auth-status" class="auth-status"></span>
                <button id="strava-connect-btn" class="btn btn-strava">Connect Strava</button>
                <span id="strava-status" class="auth-status"></span>
            </div>
        </header>

        <div class="stats-dashboard">
            <div class="stat-card">
                <div class="stat-value" id="total-routes">0</div>
                <div class="stat-label">Total Routes</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="completed-routes">0</div>
                <div class="stat-label">Completed</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="remaining-routes">0</div>
                <div class="stat-label">Remaining</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="percentage-complete">0%</div>
                <div class="stat-label">Progress</div>
            </div>
        </div>

        <div class="controls">
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="completed">Completed</button>
                <button class="filter-btn" data-filter="remaining">Remaining</button>
            </div>
            <div class="search-box">
                <input type="text" id="search-input" placeholder="Search routes...">
            </div>
        </div>

        <div id="routes-container" class="routes-container">
            <div class="loading">Loading routes...</div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="auth-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>GitHub Authentication</h2>
            <p>To edit routes, you need to authenticate with GitHub.</p>
            <div class="auth-options">
                <div class="auth-option">
                    <h3>Option 1: Personal Access Token</h3>
                    <p>Create a token with <code>gist</code> scope at:</p>
                    <a href="https://github.com/settings/tokens" target="_blank">github.com/settings/tokens</a>
                    <input type="password" id="token-input" placeholder="Enter your GitHub token">
                    <button id="token-submit" class="btn btn-primary">Use Token</button>
                </div>
                <div class="auth-option">
                    <h3>Option 2: OAuth (Coming Soon)</h3>
                    <p>OAuth flow will be available in a future update.</p>
                </div>
            </div>
            <div id="gist-setup" class="gist-setup" style="display: none;">
                <h3>Gist Setup (Optional)</h3>
                <p><strong>A new Gist will be automatically created when you mark your first route as completed.</strong> You can close this modal and start tracking routes right away!</p>
                <p>If you already have a Gist with your progress, enter its ID below:</p>
                <input type="text" id="gist-id-input" placeholder="Gist ID (optional)">
                <button id="gist-submit" class="btn btn-primary">Save Gist ID</button>
            </div>
        </div>
    </div>

    <!-- Activity Linking Modal -->
    <div id="activity-modal" class="modal">
        <div class="modal-content">
            <span class="close-activity">&times;</span>
            <h2>Link Strava Activity</h2>
            <div id="activity-modal-content">
                <div class="activity-link-option">
                    <h3>Option 1: Enter Activity URL or ID</h3>
                    <input type="text" id="activity-input" placeholder="https://www.strava.com/activities/123456789 or 123456789">
                    <button id="activity-link-btn" class="btn btn-primary">Link Activity</button>
                </div>
                <div class="activity-link-option" id="recent-activities-option" style="display: none;">
                    <h3>Option 2: Select from Recent Activities</h3>
                    <div id="recent-activities-list" class="recent-activities-list"></div>
                    <button id="load-activities-btn" class="btn btn-secondary">Load Recent Activities</button>
                </div>
            </div>
            <div id="activity-linking-status" class="activity-status"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

