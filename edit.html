<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Progress - One More Route</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-top">
                <h1>One More Route</h1>
                <div class="header-intro">
                    <p class="intro-text">Hi! I'm Vitor, and I decided to ride every route on Zwift in 2026. I created this thingy to help me keep track of the progress.</p>
                    <a href="https://www.strava.com/athletes/vitords" target="_blank" rel="noopener noreferrer" class="strava-profile-badge">
                        <img src="https://d3nn82uaxijpm6.cloudfront.net/assets/website_v2/svgs/strava-orange-b3599d0edada6b7203f021e9c1e34a63.svg" alt="Strava" class="strava-logo-badge">
                        <span>Find me on Strava</span>
                    </a>
                </div>
            </div>
            <div class="header-bottom">
                <div class="navigation-links">
                    <!-- Navigation links will be injected here by app.js -->
                </div>
                <div class="auth-section">
                    <button id="auth-btn" class="btn btn-primary">Login to Edit</button>
                    <span id="auth-status" class="auth-status"></span>
                    <button id="strava-connect-btn" class="btn btn-primary">Connect Strava</button>
                    <span id="strava-status" class="auth-status"></span>
                </div>
            </div>
        </header>

        <div class="stats-dashboard">
            <div class="stats-section">
                <h3 class="stats-section-title">Overview</h3>
                <div class="stats-grid">
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Total:</span>
                        <span class="stat-value-inline" id="total-routes">0</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Completed:</span>
                        <span class="stat-value-inline" id="completed-routes">0</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Remaining:</span>
                        <span class="stat-value-inline" id="remaining-routes">0</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Progress:</span>
                        <span class="stat-value-inline" id="percentage-complete">0%</span>
                    </div>
                </div>
            </div>
            
            <div class="stats-section">
                <h3 class="stats-section-title">Distance</h3>
                <div class="stats-grid">
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Total:</span>
                        <span class="stat-value-inline" id="total-distance">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Completed:</span>
                        <span class="stat-value-inline" id="completed-distance">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Remaining:</span>
                        <span class="stat-value-inline" id="remaining-distance">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (All):</span>
                        <span class="stat-value-inline" id="avg-distance-all">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (Done):</span>
                        <span class="stat-value-inline" id="avg-distance-completed">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (Remaining):</span>
                        <span class="stat-value-inline" id="avg-distance-remaining">0.0 km</span>
                    </div>
                </div>
            </div>
            
            <div class="stats-section">
                <h3 class="stats-section-title">Elevation</h3>
                <div class="stats-grid">
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Total:</span>
                        <span class="stat-value-inline" id="total-elevation">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Completed:</span>
                        <span class="stat-value-inline" id="completed-elevation">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Remaining:</span>
                        <span class="stat-value-inline" id="remaining-elevation">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (All):</span>
                        <span class="stat-value-inline" id="avg-elevation-all">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (Done):</span>
                        <span class="stat-value-inline" id="avg-elevation-completed">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Avg (Remaining):</span>
                        <span class="stat-value-inline" id="avg-elevation-remaining">0 m</span>
                    </div>
                </div>
            </div>
            
            <div class="stats-section">
                <h3 class="stats-section-title">Strava Activities</h3>
                <div class="stats-grid">
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Distance:</span>
                        <span class="stat-value-inline" id="strava-total-distance">0.0 km</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Elevation:</span>
                        <span class="stat-value-inline" id="strava-total-elevation">0 m</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Moving Time:</span>
                        <span class="stat-value-inline" id="strava-total-moving-time">0:00</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Elapsed Time:</span>
                        <span class="stat-value-inline" id="strava-total-elapsed-time">0:00</span>
                    </div>
                    <div class="stat-card-compact">
                        <span class="stat-label-inline">Calories:</span>
                        <span class="stat-value-inline" id="strava-total-calories">0</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="controls">
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="completed">Completed</button>
                <button class="filter-btn" data-filter="remaining">Remaining</button>
            </div>
            <div class="search-box">
                <input type="text" id="search-input" placeholder="Search routes...">
            </div>
        </div>

        <div id="routes-container" class="routes-container">
            <div class="loading">Loading routes...</div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="auth-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>GitHub Authentication</h2>
            <p>To edit routes, you need to authenticate with GitHub.</p>
            <div class="auth-options">
                <div class="auth-option">
                    <h3>Option 1: Personal Access Token</h3>
                    <p>Create a token with <code>gist</code> scope at:</p>
                    <a href="https://github.com/settings/tokens" target="_blank">github.com/settings/tokens</a>
                    <input type="password" id="token-input" placeholder="Enter your GitHub token">
                    <button id="token-submit" class="btn btn-primary">Use Token</button>
                </div>
                <div class="auth-option">
                    <h3>Option 2: OAuth (Coming Soon)</h3>
                    <p>OAuth flow will be available in a future update.</p>
                </div>
            </div>
            <div id="gist-setup" class="gist-setup" style="display: none;">
                <h3>Gist Setup (Optional)</h3>
                <p><strong>A new Gist will be automatically created when you mark your first route as completed.</strong> You can close this modal and start tracking routes right away!</p>
                <p>If you already have a Gist with your progress, enter its ID below:</p>
                <input type="text" id="gist-id-input" placeholder="Gist ID (optional)">
                <button id="gist-submit" class="btn btn-primary">Save Gist ID</button>
            </div>
        </div>
    </div>

    <!-- Activity Linking Modal -->
    <div id="activity-modal" class="modal">
        <div class="modal-content">
            <span class="close-activity">&times;</span>
            <h2>Link Strava Activity</h2>
            <div id="activity-modal-content">
                <div class="activity-link-option">
                    <h3>Option 1: Enter Activity URL or ID</h3>
                    <input type="text" id="activity-input" placeholder="https://www.strava.com/activities/123456789 or 123456789">
                    <button id="activity-link-btn" class="btn btn-primary">Link Activity</button>
                </div>
                <div class="activity-link-option" id="recent-activities-option" style="display: none;">
                    <h3>Option 2: Select from Recent Activities</h3>
                    <div id="recent-activities-list" class="recent-activities-list"></div>
                    <button id="load-activities-btn" class="btn btn-secondary">Load Recent Activities</button>
                </div>
            </div>
            <div id="activity-linking-status" class="activity-status"></div>
        </div>
    </div>

    <!-- Activity Details Modal -->
    <div id="activity-details-modal" class="modal">
        <div class="modal-content modal-large">
            <span class="close-activity-details">&times;</span>
            <h2 id="activity-details-title">Strava Activity</h2>
            <div id="activity-details-content"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

